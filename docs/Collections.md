# Collections

## Generic Collections

### Where()

### `IEnumerable<T> Where<T>(this IEnumerable<T> enumerable, SpecBase<TModel, TMetadata> spec)`

The `.Where()` extension method overload is used to filter a collection of values based on an existing specification.

```csharp
IEnumerable<int> evenNumbers = Enumerable
    .Range(1, 10)
    .Where(new IsEvenProposition());  // [ 2, 4, 6, 8, 10 ]
```

It serves as syntactic sugar for the following code:

```csharp
var isEven = new IsEvenProposition();
IEnumerable<int> evenNumbers = Enumerable
    .Range(1, 10)
    .Where(n => isEven.IsSatisfiedBy(n));  // [ 2, 4, 6, 8, 10 ]
```

### ToEnumerable()

### `IEnumerable<T> ToEnumerable<T>(this T value)`

The `.ToEnumerable()` extension method is used to encapsulate a single value as an `Enumerable<T>`.
Internally, it yields a value instead of wrapping it in a collection data structure, and thus avoids an unnecessary
memory allocation.

```csharp
IEnumberable<int> value = 42.ToEnumerable();  // [ 42 ]
```

## Collections of Specifications

### OrTogether()

### `SpecBase<TModel, TMetadata> OrTogether<TModel, TMetadata>(this IEnumerable<SpecBase<TModel, TMetadata>> specs)`

The `.OrTogether()` extension method is used to combine a collection of specifications into a single specification
that is satisfied if any of the original specifications are satisfied.  All specifications are evaluated, regardless of
whether the previous specifications have been satisfied.

```csharp
IEnumerable<SpecBase<int>> specs = 
    [
        new IsEvenProposition(),
        new IsGreaterThanProposition(5)
    ];

var isEvenOrGreaterThanFive = specs.OrTogether();

isEvenOrGreaterThanFive.IsSatisfiedBy(6).Reason;  // "is even | is greater than 5"
isEvenOrGreaterThanFive.IsSatisfiedBy(3).Reason;  // "is odd | is less than or equal to 5"
```

### OrElseTogether()

### `SpecBase<TModel, TMetadata> OrElseTogether<TModel, TMetadata>(this IEnumerable<SpecBase<TModel, TMetadata>> specs)`

The `.OrElseTogether()` extension method is used to combine a collection of specifications into a single specification
that is satisfied if any of the original specifications are satisfied.  If the first specification is satisfied, the
remaining specifications are not evaluated.  This means that any assertions or metadata that would be generated by the
remaining specifications are not generated.

```csharp
IEnumerable<SpecBase<int>> specs = 
    [
        new IsEvenProposition(),
        new IsGreaterThanProposition(5)
    ];

var isEvenOrElseGreaterThanFive = specs.OrElseTogether();

isEvenOrElseGreaterThanFive.IsSatisfiedBy(6).Reason;  // "is even"
isEvenOrElseGreaterThanFive.IsSatisfiedBy(3).Reason;  // "is odd || is less than or equal to 5"
```

### AndTogether()

### `SpecBase<TModel, TMetadata> AndTogether<TModel, TMetadata>(this IEnumerable<SpecBase<TModel, TMetadata>> specs)`

The `.AndTogether()` extension method is used to combine a collection of specifications into a single specification
that is satisfied if all the original specifications are satisfied.  All specifications are evaluated, regardless of
whether the previous specifications have been satisfied.

```csharp
IEnumerable<SpecBase<int>> specs = 
    [
        new IsEvenProposition(),
        new IsGreaterThanProposition(5)
    ];

var isEvenAndGreaterThanFive = specs.AndTogether();

isEvenAndGreaterThanFive.IsSatisfiedBy(6).Reason;  // "is even & is greater than 5"
isEvenAndGreaterThanFive.IsSatisfiedBy(3).Reason;  // "is odd & is less than or equal to 5"
```

### AndAlsoTogether()

### `SpecBase<TModel, TMetadata> AndAlsoTogether<TModel, TMetadata>(this IEnumerable<SpecBase<TModel, TMetadata>> specs)`

The `.AndAlsoTogether()` extension method is used to combine a collection of specifications into a single specification
that is satisfied if all the original specifications are satisfied.  If the first specification is not satisfied, the
remaining specifications are not evaluated.  This means that any assertions or metadata that would be generated by the
remaining specifications are not generated.

```csharp
IEnumerable<SpecBase<int>> specs = 
    [
        new IsEvenProposition(),
        new IsGreaterThanProposition(5)
    ];

var isEvenAndGreaterThanFive = specs.AndAlsoTogether();

isEvenAndAlsoGreaterThanFive.IsSatisfiedBy(6).Reason;  // "is even && is greater than 5"
isEvenAndAlsoGreaterThanFive.IsSatisfiedBy(3).Reason;  // "is odd"
```

## Collections of Boolean Results

### OrTogether()

### `BooleanResultBase<TMetadata> OrTogether<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.OrTogether()` extension method is used to combine a collection of boolean results into a single boolean result
that is satisfied if any of the original results are satisfied.  All results are evaluated, regardless of
whether the previous results have been satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

var orTogetherResult = results.OrTogether();

orTogetherResult.Reason;  // "is even & is greater than 5"
```

### OrElseTogether()

### `BooleanResultBase<TMetadata> OrElseTogether<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.OrElseTogether()` extension method is used to combine a collection of boolean results into a single boolean result
that is satisfied if any of the original results are satisfied.  If the first result is satisfied, the
remaining results are not evaluated.  This means that any assertions or metadata that would be generated by the
remaining results are not generated.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

var orElseTogetherResult = results.OrElseTogether();

orElseTogetherResult.Reason;  // "is even"
```

### AndTogether()

### `BooleanResultBase<TMetadata> AndTogether<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.AndTogether()` extension method is used to combine a collection of boolean results into a single boolean result
that is satisfied if all the original results are satisfied.  All results are evaluated, regardless of
whether the previous results have been satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

var andTogetherResult = results.AndTogether();

andTogetherResult.Reason;  // "is even & is greater than 5"
```

### AndAlsoTogether()

### `BooleanResultBase<TMetadata> AndAlsoTogether<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.AndAlsoTogether()` extension method is used to combine a collection of boolean results into a single boolean result
that is satisfied if all the original results are satisfied.  If the first result is not satisfied, the
remaining results are not evaluated.  This means that any assertions or metadata that would be generated by the
remaining results are not generated.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

var andAlsoTogetherResult = results.AndAlsoTogether();

andAlsoTogetherResult.Reason;  // "is even & is greater than 5"
```

###  WhereTrue()

### `IEnumerable<T> WhereTrue<T>(this IEnumerable<BooleanResultBase<T>> results)`

The `.WhereTrue()` extension method is used to filter a collection of boolean results based on whether the result is
satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

var trueResults = results.WhereTrue();

trueResults.Select(result => result.Reason);  // [ "is even" ]
```

### WhereFalse()

### `IEnumerable<T> WhereFalse<T>(this IEnumerable<BooleanResultBase<T>> results)`

The `.WhereFalse()` extension method is used to filter a collection of boolean results based on whether the result is
not satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

var falseResults = results.WhereFalse();

falseResults.Select(result => result.Reason);  // [ "is greater than 5" ]
```

### CountTrue()

### `int CountFalse<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.CountTrue()` extension method is used to count the number of boolean results that are satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

results.CountTrue();  // 1
```

### CountFalse()

### `int CountFalse<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.CountFalse()` extension method is used to count the number of boolean results that are not satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

results.CountFalse();  // 1
```

### AllTrue()

### `bool AllTrue<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.AllTrue()` extension method is used to determine whether all the boolean results are satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

results.AllTrue();  // true
```

### AllFalse()

### `bool AllFalse<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`
The `.AllFalse()` extension method is used to determine whether all the boolean results are not satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(1),
        new IsGreaterThanProposition(5).IsSatisfiedBy(1)
    ];

results.AllFalse();  // true
```

### AnyTrue()

### `bool AnyTrue<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.AnyTrue()` extension method is used to determine whether any of the boolean results are satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(6),
        new IsGreaterThanProposition(5).IsSatisfiedBy(1)
    ];

results.AnyTrue();  // true
```

### AnyFalse()

### `bool AnyFalse<TMetadata>(this IEnumerable<BooleanResultBase<TMetadata>> results)`

The `.AnyFalse()` extension method is used to determine whether any of the boolean results are not satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(1),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

results.AnyFalse();  // true
```

### GetAssertions()

### `IEnumerable<string> GetAssertions(this IEnumerable<BooleanResultBase> results)`

The `.GetAssertions()` extension method is used to extract the assertions from a collection of boolean results.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(6)
    ];

results.GetAssertions();  // [ "is even", "is greater than 5" ]
```

### GetTrueAssertions()

### `IEnumerable<string> GetTrueAssertions(this IEnumerable<BooleanResultBase> results)`

The `.GetTrueAssertions()` extension method is used to extract the assertions from a collection of boolean results 
that are satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

results.GetTrueAssertions();  // [ "is even" ]
```

### GetFalseAssertions()

### `IEnumerable<string> GetFalseAssertions(this IEnumerable<BooleanResultBase> results)`

The `.GetFalseAssertions()` extension method is used to extract the assertions from a collection of boolean results
that are not satisfied.

```csharp
IEnumerable<BooleanResult<int, string>> results = 
    [
        new IsEvenProposition().IsSatisfiedBy(4),
        new IsGreaterThanProposition(5).IsSatisfiedBy(4)
    ];

results.GetFalseAssertions();  // [ "is greater than 5" ]
```

### GetRootAssertions()

### `IEnumerable<string> GetRootAssertions(this BooleanResultBase result)`

The `.GetRootAssertions()` extension method is used to extract the assertions from the root causes.  Only the root 
assertions that caused the final result to be satisfied or not are returned.

```csharp
var isEven = 
    Spec.Build<int>(n => n % 2 == 0)
        .WhenTrue("is even")
        .WhenFalse("is odd")
        .Create();

var areEven = 
    Spec.Build(isEven)
        .AsAnySatisfied()
        .WhenTrue("some even")
        .WhenFalse("all odd")
        .Create();


areEven.IsSatisfiedBy([ 1, 2, 3, 4 ]).GetRootAssertions();  // [ "is even" ]
```

### GetAllRootAssertions()

### `IEnumerable<string> GetAllRootAssertions(this IEnumerable<BooleanResultBase> results)`

The `.GetAllRootAssertions()` extension method is used to extract the root assertions from a collection of boolean 
results, whether they cause the result to be satisfied or not.

```csharp
var isEven = 
    Spec.Build<int>(n => n % 2 == 0)
        .WhenTrue("is even")
        .WhenFalse("is odd")
        .Create();

var areEven =
    Spec.Build(isEven)
        .AsAnySatisfied()
        .WhenTrue("some even")
        .WhenFalse("all odd")
        .Create();

areEven.IsSatisfiedBy([ 1, 2, 3, 4 ]).GetRootAssertions();  // [ "is even", "is odd" ]
```
